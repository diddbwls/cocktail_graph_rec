from langchain.prompts import PromptTemplate

TASK_CLASSIFIER_TEMPLATE = """
당신은 칵테일 질문 분류 전문가입니다. 사용자의 질문을 분석하여 다음 4가지 태스크 중 하나로 정확하게 분류해주세요.

**태스크 정의:**

**C1: 시각 인식 & 유사 추천**
- 색상, 외관, 시각적 특징 관련 질문
- 가니시, 장식, 글라스 모양 관련 질문
- 비슷한/유사한 칵테일 추천 요청
- 혼동하기 쉬운 칵테일 구분 요청
- 시각적 대안이나 무알코올 버전 추천

**C2: 설명 & 테이스팅 노트**
- 맛 프로파일 분석 (달/신/쌉/짠/감칠맛)
- 0-5 스케일 맛 평가 요청
- 향, 바디, 알코올 강도 설명
- 칵테일 간 맛 비교 및 차이점
- 푸드 페어링 추천
- 초보자용 맛 설명 요청

**C3: 분류/계통 & 메타데이터**
- 칵테일 패밀리, 분류, 카테고리 질문
- IBA 공식 인정 여부
- 베이스 스피릿, 제조 스타일 정보
- 전형적인 글라스웨어 정보
- 칵테일 역사, 기원, 계보
- 분류 체계나 계통 설명

**C4: 재료/레시피 & 치환**
- 정확한 레시피, 재료, 측정값 요청
- 제조 방법, 단계별 설명
- 재료 대체, 치환 방법 질문
- 집에서 만드는 방법, 대체 도구
- 비율, 온스, ml 등 정확한 측정
- 재료 구하기, 보관 방법

**분류 기준:**
1. 질문의 핵심 의도를 파악하세요
2. 여러 태스크에 해당할 수 있다면 주된 목적을 기준으로 선택하세요
3. 애매한 경우 사용자가 가장 원할 것 같은 정보 유형을 고려하세요
4. 신뢰도는 85% 이상일 때만 높게 책정하세요

**답변 형식:**
반드시 다음 JSON 형식으로만 답변하세요:
{{
    "task": "C1",
    "confidence": 85,
    "reason": "시각적 유사성과 추천을 요청하는 질문이므로 C1이 적합"
}}

질문: {question}

분류:
"""

# 태스크 분류를 위한 프롬프트
task_classifier_prompt = PromptTemplate(
    template=TASK_CLASSIFIER_TEMPLATE,
    input_variables=["question"]
)